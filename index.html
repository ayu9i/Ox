<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AYU ARENA - THE ULTIMATE ECONOMY</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6366f1; --g: #fbbf24; --bg: #020617; --glass: rgba(15, 23, 42, 0.95); --green: #10b981; --red: #ef4444; }
        * { box-sizing: border-box; transition: all 0.2s ease; touch-action: manipulation; }
        body, html { margin: 0; padding: 0; min-height: 100vh; font-family: 'Kanit', sans-serif; background: var(--bg); color: white; overflow: hidden; }

        /* --- STABILITY INDICATOR --- */
        .net-status { position: fixed; top: 15px; right: 15px; z-index: 2000; display: flex; align-items: center; gap: 8px; background: rgba(0,0,0,0.6); padding: 5px 12px; border-radius: 10px; font-size: 0.7rem; font-family: 'Orbitron'; border: 1px solid rgba(255,255,255,0.1); }
        .dot { width: 7px; height: 7px; border-radius: 50%; background: var(--green); }
        .dot.offline { background: var(--red); box-shadow: 0 0 8px var(--red); }

        /* --- UI HELPERS --- */
        .c { width: 90%; max-width: 480px; padding: 30px; background: var(--glass); backdrop-filter: blur(25px); border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); text-align: center; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); box-shadow: 0 20px 80px rgba(0,0,0,0.8); z-index: 100; }
        .hidden { display: none !important; }
        .btn { width: 100%; padding: 14px; background: var(--p); border: none; border-radius: 12px; color: white; font-weight: 700; cursor: pointer; margin-top: 10px; font-family: 'Kanit'; font-size: 1rem; }
        .btn:disabled { background: #1e293b; color: #475569; cursor: not-allowed; }
        .btn-gold { background: var(--g); color: #000; }

        /* --- TOP STATS --- */
        .top-bar { position: fixed; top: 15px; display: flex; gap: 8px; z-index: 500; width: 100%; justify-content: center; }
        .pill { background: rgba(0,0,0,0.8); padding: 6px 15px; border-radius: 50px; border: 1px solid var(--g); font-size: 0.8rem; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        /* --- GAME WORLD --- */
        .world { height: 220px; background: linear-gradient(to bottom, #1e293b, #020617); border-radius: 20px; position: relative; overflow: hidden; border: 2px solid #334155; margin: 15px 0; cursor: crosshair; }
        #pet { position: absolute; bottom: 20px; left: 50%; font-size: 65px; transform: translateX(-50%); z-index: 10; pointer-events: none; }
        .star { position: absolute; font-size: 25px; animation: fall 2s linear forwards; }
        @keyframes fall { to { top: 250px; } }
        
        .score-display { position: absolute; top: 10px; left: 10px; color: var(--g); font-family: 'Orbitron'; font-weight: 900; z-index: 20; font-size: 1.2rem; text-shadow: 0 0 10px #000; }

        /* --- BARS --- */
        .bar-o { width: 100%; height: 10px; background: #1e293b; border-radius: 10px; margin-bottom: 12px; overflow: hidden; }
        .bar-i { height: 100%; background: var(--g); width: 100%; transition: 0.3s; }
        
        /* --- LOG & SHOP --- */
        .log { height: 80px; background: rgba(0,0,0,0.4); border-radius: 15px; padding: 10px; overflow-y: auto; text-align: left; font-size: 0.8rem; margin: 10px 0; border: 1px solid rgba(255,255,255,0.05); }
        .shop-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 15px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body>

    <div class="net-status"><div id="net-dot" class="dot"></div><span id="ping">PING: 21ms</span></div>

    <div id="ui-top" class="top-bar hidden">
        <div class="pill">üë§ <span id="u-n"></span></div>
        <div class="pill">üí∞ <span id="u-c">0</span></div>
        <div class="pill">üçñ <span id="u-f">0</span></div>
    </div>

    <div id="scr-reg" class="c">
        <h1 style="font-family:'Orbitron'; color:var(--p); margin:0">AYU ARENA</h1>
        <p style="font-size:0.7rem; color:#94a3b8; letter-spacing:2px; margin-bottom:20px;">ECONOMY v3.0</p>
        <input type="text" id="in-n" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠ ID..." style="width:100%; padding:14px; margin-bottom:20px; border-radius:12px; border:1px solid #334155; background:#000; color:white; text-align:center;">
        <p style="font-size:0.85rem">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏π‡πà‡∏´‡∏π (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)</p>
        <div style="margin-bottom:20px;">
            <button class="btn" style="width:auto; padding:10px 20px;" onclick="selP('üê∂')">üê∂</button>
            <button class="btn" style="width:auto; padding:10px 20px;" onclick="selP('üê±')">üê±</button>
            <button class="btn" style="width:auto; padding:10px 20px;" onclick="selP('üêº')">üêº</button>
        </div>
        <button class="btn btn-gold" onclick="launch()">INITIALIZE</button>
    </div>

    <div id="scr-hub" class="c hidden">
        <h2 style="font-family:'Orbitron'; color:var(--g)">COMMAND HUB</h2>
        <button class="btn" onclick="nav('pet')">üêæ TAMAGOTCHI & MINIGAME</button>
        <button class="btn" onclick="nav('word')">ü§ñ WORD BATTLE VS AI</button>
        <button class="btn" onclick="nav('shop')">üõí PET SHOP</button>
        <button class="btn" style="background:#1e293b; color:var(--red); margin-top:20px;" onclick="wipe()">ERASE ALL DATA</button>
    </div>

    <div id="scr-pet" class="c hidden">
        <div id="score-val" class="score-display hidden">STARS: 0</div>
        <div class="world" id="game-area">
            <div id="pet">üê∂</div>
        </div>
        
        <div id="pet-controls">
            <div style="display:flex; justify-content:space-between; font-size:0.75rem"><span>HUNGER (‡∏´‡∏¥‡∏ß)</span><span id="t-h">100%</span></div>
            <div class="bar-o"><div id="b-h" class="bar-i"></div></div>
            
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:8px;">
                <button id="btn-feed" class="btn btn-gold" onclick="feed()">üçñ FEED (‡∏™‡∏ï‡πá‡∏≠‡∏Å: <span id="inv-f">0</span>)</button>
                <button class="btn btn-gold" onclick="startMiniGame()">‚≠ê PLAY GAME (‡∏´‡∏≤‡πÄ‡∏á‡∏¥‡∏ô)</button>
                <button class="btn" style="grid-column:span 2" onclick="nav('hub')">BACK TO HUB</button>
            </div>
            <p id="hint" style="font-size:0.7rem; color:#94a3b8; margin-top:10px;">*‡πÅ‡∏ï‡∏∞/‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏µ‡∏î‡∏≥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏£‡∏±‡∏ö‡∏î‡∏≤‡∏ß*</p>
        </div>
    </div>

    <div id="scr-shop" class="c hidden">
        <h2 style="font-family:'Orbitron'; color:var(--g)">PET SHOP</h2>
        <div class="shop-item">
            <p style="margin:0 0 10px 0">üçó ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ (‡∏≠‡∏¥‡πà‡∏° +25)</p>
            <button class="btn btn-gold" onclick="buy(1, 50)">1 ‡∏ä‡∏¥‡πâ‡∏ô (50 üí∞)</button>
            <button class="btn btn-gold" onclick="buy(5, 225)">5 ‡∏ä‡∏¥‡πâ‡∏ô (225 üí∞)</button>
        </div>
        <button class="btn" onclick="nav('hub')">BACK</button>
    </div>

    <div id="scr-word" class="c hidden">
        <div style="background:rgba(0,0,0,0.5); padding:20px; border-radius:20px; border: 1px solid var(--g);">
            <div id="cur-w" style="font-size:2.2rem; color:var(--g); font-weight:900">SKY</div>
            <p>‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢: <b id="next-l" style="color:var(--red)">Y</b></p>
        </div>
        <div id="w-log" class="log">‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏£‡∏∞‡∏•‡∏≠‡∏á‡∏Å‡∏±‡∏ö AI...</div>
        <input type="text" id="w-in" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö..." style="width:100%; padding:14px; margin:10px 0; border-radius:12px; border:none; text-align:center;">
        <button class="btn btn-gold" onclick="wCheck()">SUBMIT (+15üí∞)</button>
        <button class="btn" onclick="nav('hub')">BACK</button>
    </div>

    <script>
        let state = { n:'', a:'üê∂', c:100, f:3, h:100, w:'SKY', reg:false };
        let isGaming = false;
        let starTimer;

        // --- STABILITY ---
        setInterval(() => {
            const dot = document.getElementById('net-dot');
            dot.className = navigator.onLine ? "dot" : "dot offline";
            document.getElementById('ping').innerText = "PING: " + (Math.floor(Math.random()*15)+10) + "ms";
        }, 4000);

        // --- DATA ---
        window.onload = () => {
            const saved = localStorage.getItem('AYU_FINAL_MASTER');
            if(saved) {
                state = JSON.parse(saved);
                if(state.reg) { document.getElementById('scr-reg').classList.add('hidden'); init(); nav('hub'); }
            }
            setInterval(() => { if(state.reg) { state.h = Math.max(0, state.h - 1); updateUI(); save(); } }, 15000);
        };

        function save() { localStorage.setItem('AYU_FINAL_MASTER', JSON.stringify(state)); }
        function selP(i) { state.a = i; alert("‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: " + i); }
        function launch() {
            const n = document.getElementById('in-n').value;
            if(!n) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠!");
            state.n = n; state.reg = true;
            document.getElementById('scr-reg').classList.add('hidden');
            init(); nav('hub'); save();
        }

        function init() {
            document.getElementById('ui-top').classList.remove('hidden');
            document.getElementById('u-n').innerText = state.n;
            document.getElementById('pet').innerText = state.a;
            updateUI();
        }

        function updateUI() {
            document.getElementById('u-c').innerText = state.c.toLocaleString();
            document.getElementById('u-f').innerText = state.f;
            document.getElementById('inv-f').innerText = state.f;
            document.getElementById('b-h').style.width = state.h + "%";
            document.getElementById('t-h').innerText = state.h + "%";
            document.getElementById('cur-w').innerText = state.w;
            document.getElementById('next-l').innerText = state.w.slice(-1).toUpperCase();
            document.getElementById('btn-feed').disabled = (state.f <= 0 || state.h >= 100);
        }

        function nav(scr) {
            document.querySelectorAll('.c').forEach(el => el.classList.add('hidden'));
            document.getElementById('scr-' + scr).classList.remove('hidden');
            isGaming = false; clearInterval(starTimer);
            document.getElementById('pet-controls').classList.remove('hidden');
            document.getElementById('score-val').classList.add('hidden');
        }

        // --- SHOP & FEED ---
        function buy(amt, price) {
            if(state.c >= price) { state.c -= price; state.f += amt; updateUI(); save(); }
            else { alert("‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠! ‡πÑ‡∏õ‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏¥‡∏ô‡∏¥‡πÄ‡∏Å‡∏°‡∏î‡πà‡∏ß‡∏ô"); }
        }
        function feed() {
            if(state.f > 0) {
                state.f--; state.h = Math.min(100, state.h + 25);
                updateUI(); save();
                document.getElementById('pet').animate([{transform:'translateX(-50%) scale(1.5)'},{transform:'translateX(-50%) scale(1)'}], 300);
            }
        }

        // --- MINIGAME ENGINE ---
        function startMiniGame() {
            isGaming = true;
            let score = 0;
            document.getElementById('pet-controls').classList.add('hidden');
            document.getElementById('score-val').classList.remove('hidden');
            document.getElementById('score-val').innerText = "STARS: 0";
            
            // Movement (Touch/Mouse)
            const area = document.getElementById('game-area');
            const movePet = (e) => {
                if(!isGaming) return;
                let rect = area.getBoundingClientRect();
                let x = (e.clientX || e.touches[0].clientX) - rect.left;
                x = Math.max(30, Math.min(x, rect.width - 30));
                document.getElementById('pet').style.left = x + "px";
            };
            area.onmousemove = movePet;
            area.ontouchmove = movePet;

            starTimer = setInterval(() => {
                if(!isGaming) return;
                const star = document.createElement('div');
                star.className = 'star';
                star.innerText = "‚≠ê";
                star.style.left = Math.random() * 90 + "%";
                star.style.top = "0px";
                area.appendChild(star);

                let check = setInterval(() => {
                    let pRect = document.getElementById('pet').getBoundingClientRect();
                    let sRect = star.getBoundingClientRect();
                    if(sRect.bottom >= pRect.top && sRect.left < pRect.right && sRect.right > pRect.left) {
                        score++;
                        document.getElementById('score-val').innerText = "STARS: " + score;
                        star.remove(); clearInterval(check);
                    }
                    if(sRect.top > 220) { star.remove(); clearInterval(check); }
                }, 50);
            }, 800);

            setTimeout(() => {
                isGaming = false; clearInterval(starTimer);
                let reward = score * 20;
                state.c += reward;
                alert(`‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡πÄ‡∏Å‡πá‡∏ö‡∏î‡∏≤‡∏ß‡πÑ‡∏î‡πâ ${score} ‡∏î‡∏ß‡∏á ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô ${reward} üí∞`);
                nav('hub'); updateUI(); save();
            }, 15000);
        }

        // --- AI WORD BATTLE ---
        function wCheck() {
            const v = document.getElementById('w-in').value.trim().toUpperCase();
            const last = state.w.slice(-1).toUpperCase();
            if(v.startsWith(last) && v.length > 1) {
                state.w = v; state.c += 15;
                addLog(`üë§ You: ${v}`, "var(--green)");
                document.getElementById('w-in').value = "";
                updateUI();
                // AI Logic
                setTimeout(() => {
                    const aiDict = ["APPLE", "EGG", "GOAT", "TIGER", "RABBIT", "TEA", "ANT", "YOYO", "YOUTH", "YELLOW", "ZEBRA", "NOSE", "ELEPHANT"];
                    const nextChar = state.w.slice(-1).toUpperCase();
                    const choice = aiDict.filter(w => w.startsWith(nextChar));
                    if(choice.length > 0) {
                        state.w = choice[Math.floor(Math.random()*choice.length)];
                        addLog(`ü§ñ AI: ${state.w}`, "var(--g)");
                        updateUI(); save();
                    } else {
                        addLog(`ü§ñ AI: ‡∏â‡∏±‡∏ô‡πÅ‡∏û‡πâ‡πÅ‡∏•‡πâ‡∏ß!`, "var(--red)");
                        state.c += 50; updateUI(); save();
                    }
                }, 1000);
            } else { alert("‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß " + last); }
        }

        function addLog(txt, color) {
            const l = document.getElementById('w-log');
            if(l.innerText.includes("‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°")) l.innerHTML = "";
            l.innerHTML = `<div style="color:${color}">${txt}</div>` + l.innerHTML;
        }

        function wipe() { if(confirm("‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) { localStorage.clear(); location.reload(); } }
    </script>
</body>
</html>
