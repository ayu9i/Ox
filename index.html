<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AYU ARENA - ULTIMATE MASTERPIECE 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6366f1; --g: #fbbf24; --bg: #020617; --glass: rgba(15, 23, 42, 0.95); --green: #10b981; --red: #ef4444; }
        * { box-sizing: border-box; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        body, html { margin: 0; padding: 0; min-height: 100vh; font-family: 'Kanit', sans-serif; background: var(--bg); color: white; overflow: hidden; }

        /* --- NETWORK & PING INDICATOR --- */
        .net-status { position: fixed; top: 20px; right: 20px; z-index: 2000; display: flex; align-items: center; gap: 8px; background: rgba(0,0,0,0.6); padding: 5px 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); font-size: 0.75rem; font-family: 'Orbitron'; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--green); box-shadow: 0 0 10px var(--green); }
        .dot.lag { background: var(--g); box-shadow: 0 0 10px var(--g); }
        .dot.offline { background: var(--red); box-shadow: 0 0 10px var(--red); }

        /* --- CONAN GATE (DOOR SYSTEM) --- */
        #gate { position: fixed; inset: 0; z-index: 10000; display: none; perspective: 1500px; }
        .door { position: absolute; width: 50%; height: 100%; background: #0f172a; border: 1px solid #1e293b; display: flex; align-items: center; justify-content: center; transition: 1.8s cubic-bezier(0.7, 0, 0.3, 1); box-shadow: inset 0 0 100px #000; }
        .door-l { left: 0; transform-origin: left; border-right: 3px solid var(--g); }
        .door-r { right: 0; transform-origin: right; border-left: 3px solid var(--g); }
        .gate-open .door-l { transform: rotateY(-105deg); }
        .gate-open .door-r { transform: rotateY(105deg); }
        .gate-flash { position: absolute; left: 50%; width: 2px; height: 100%; background: white; box-shadow: 0 0 100px 50px white; opacity: 0; z-index: 10001; }
        .gate-open .gate-flash { opacity: 0.8; transition: 0.5s; }

        /* --- UI COMPONENTS --- */
        .c { width: 90%; max-width: 500px; padding: 35px; background: var(--glass); backdrop-filter: blur(25px); border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); text-align: center; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); box-shadow: 0 30px 100px rgba(0,0,0,0.8); z-index: 10; }
        .hidden { display: none !important; }
        .btn { width: 100%; padding: 14px; background: var(--p); border: none; border-radius: 12px; color: white; font-weight: 700; cursor: pointer; margin-top: 10px; font-family: 'Kanit'; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(99,102,241,0.4); }
        .btn-gold { background: var(--g); color: #000; }

        /* --- TOP BAR --- */
        .top-bar { position: fixed; top: 20px; display: flex; gap: 10px; z-index: 500; width: 100%; justify-content: center; }
        .pill { background: rgba(0,0,0,0.8); padding: 8px 18px; border-radius: 50px; border: 1px solid var(--g); font-size: 0.85rem; }

        /* --- TAMAGOTCHI WORLD --- */
        .world { height: 200px; background: linear-gradient(to bottom, #1e293b, #020617); border-radius: 25px; position: relative; overflow: hidden; border: 1px solid #334155; margin: 15px 0; }
        #pet { position: absolute; bottom: 30px; left: 50%; font-size: 70px; transition: 1.5s ease-in-out; transform: translateX(-50%); }
        #partner { position: absolute; bottom: 30px; right: -120px; font-size: 60px; transition: 2s; opacity: 0; }
        .bubble { position: absolute; top: -50px; left: 50%; transform: translateX(-50%); background: white; color: black; padding: 6px 12px; border-radius: 12px; font-size: 14px; font-weight: bold; white-space: nowrap; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }

        /* --- PROGRESS BARS --- */
        .bar-outer { width: 100%; height: 10px; background: #1e293b; border-radius: 10px; margin-bottom: 15px; overflow: hidden; }
        .bar-inner { height: 100%; background: var(--g); width: 100%; transition: 0.5s; }
        .log-box { height: 90px; background: rgba(0,0,0,0.4); border-radius: 15px; padding: 10px; overflow-y: auto; text-align: left; font-size: 0.8rem; border: 1px solid rgba(255,255,255,0.1); margin: 10px 0; }
    </style>
</head>
<body>

    <div class="net-status">
        <div id="net-dot" class="dot"></div>
        <span id="ping-val">PING: --ms</span>
    </div>

    <div id="gate">
        <div class="gate-flash"></div>
        <div class="door door-l"></div>
        <div class="door door-r"></div>
    </div>

    <div id="ui-top" class="top-bar hidden">
        <div class="pill">üë§ <span id="u-name"></span></div>
        <div class="pill">üí∞ <span id="u-coins">0</span></div>
        <div class="pill">‚ù§Ô∏è <span id="u-love">0</span></div>
    </div>

    <div id="scr-reg" class="c">
        <h1 style="font-family:'Orbitron'; color:var(--p); margin:0">AYU ARENA</h1>
        <p style="font-size:0.8rem; color:#94a3b8; letter-spacing:3px;">SYSTEM VERSION 2.0</p>
        <input type="text" id="in-name" placeholder="‡∏õ‡πâ‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô..." style="width:100%; padding:15px; margin:20px 0; border-radius:12px; border:1px solid #334155; background:#000; color:white; text-align:center;">
        <p style="margin:0; font-size:0.85rem">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)</p>
        <div style="margin:15px 0;">
            <div id="p1" class="btn" style="width:auto; display:inline-block; padding:10px 20px; margin:5px" onclick="selP('üê∂','p1')">üê∂ DOG</div>
            <div id="p2" class="btn" style="width:auto; display:inline-block; padding:10px 20px; margin:5px" onclick="selP('üê±','p2')">üê± CAT</div>
            <div id="p3" class="btn" style="width:auto; display:inline-block; padding:10px 20px; margin:5px" onclick="selP('üêº','p3')">üêº PANDA</div>
        </div>
        <button class="btn btn-gold" onclick="launch()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>

    <div id="scr-hub" class="c hidden">
        <h2 style="font-family:'Orbitron'; color:var(--g)">COMMAND HUB</h2>
        <button class="btn" onclick="nav('pet')">üêæ ‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå (TAMAGOTCHI)</button>
        <button class="btn" onclick="nav('word')">üìö ‡∏ï‡πà‡∏≠‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (TH/EN)</button>
        <button class="btn" style="background:#1e293b; color:var(--red); margin-top:20px;" onclick="wipe()">RESET DATA</button>
    </div>

    <div id="scr-pet" class="c hidden">
        <div class="world">
            <div id="pet">üê∂<div id="p-say" class="bubble hidden">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ!</div></div>
            <div id="partner">üê∂</div>
        </div>
        <div style="display:flex; justify-content:space-between; font-size:0.8rem"><span>HUNGER</span><span id="t-h">100%</span></div>
        <div class="bar-outer"><div id="b-h" class="bar-inner"></div></div>
        <div style="display:flex; justify-content:space-between; font-size:0.8rem"><span>HAPPINESS</span><span id="t-s">100%</span></div>
        <div class="bar-outer"><div id="b-s" class="bar-inner" style="background:var(--green)"></div></div>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:8px;">
            <button class="btn btn-gold" onclick="pAct('feed')">üçñ FEED</button>
            <button class="btn btn-gold" onclick="pAct('walk')">üèÉ WALK</button>
            <button class="btn btn-gold" style="grid-column: span 2" onclick="pAct('date')">üíñ FIND PARTNER (+100üí∞)</button>
            <button class="btn" style="grid-column: span 2" onclick="nav('hub')">BACK TO HUB</button>
        </div>
    </div>

    <div id="scr-word" class="c hidden">
        <div style="display:flex; gap:10px; margin-bottom:10px">
            <button class="btn" style="padding:8px" onclick="setL('TH')">‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</button>
            <button class="btn" style="padding:8px" onclick="setL('EN')">ENGLISH</button>
        </div>
        <div style="background:rgba(0,0,0,0.5); padding:15px; border-radius:20px">
            <div id="cur-w" style="font-size:2.5rem; color:var(--g); font-weight:900">SKY</div>
            <p>‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢: <b id="next-l" style="color:var(--red)">Y</b></p>
        </div>
        <div id="w-log" class="log-box">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏Ñ‡∏≥...</div>
        <input type="text" id="w-in" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå..." style="width:100%; padding:15px; margin:10px 0; border-radius:12px; border:none; text-align:center;">
        <button class="btn btn-gold" onclick="wCheck()">SUBMIT (+25üí∞)</button>
        <button class="btn" onclick="nav('hub')">BACK TO HUB</button>
    </div>

    <script>
        // --- GLOBAL STATE ---
        let d = { n:'', a:'üê∂', c:0, l:0, h:100, s:80, w:'SKY', lang:'EN', reg:false };
        let walkLoop;

        // --- NETWORK STABILITY ---
        function checkNet() {
            const dot = document.getElementById('net-dot');
            const txt = document.getElementById('ping-val');
            if(!navigator.onLine) { dot.className="dot offline"; txt.innerText="OFFLINE"; return; }
            const start = Date.now();
            fetch('https://www.google.com/favicon.ico', { mode:'no-cors', cache:'no-cache' }).then(() => {
                const ping = Date.now() - start;
                txt.innerText = `PING: ${ping}ms`;
                dot.className = ping > 200 ? "dot lag" : "dot";
            }).catch(() => { dot.className="dot offline"; txt.innerText="ERROR"; });
        }
        setInterval(checkNet, 5000);

        // --- DATA SYSTEM ---
        window.onload = () => {
            const saved = localStorage.getItem('AYU_FINAL_SAVE');
            if(saved) {
                d = JSON.parse(saved);
                if(d.reg) { document.getElementById('scr-reg').classList.add('hidden'); init(); nav('hub'); }
            }
        };
        function save() { localStorage.setItem('AYU_FINAL_SAVE', JSON.stringify(d)); }

        function selP(icon, id) {
            d.a = icon;
            document.querySelectorAll('#scr-reg .btn').forEach(b => b.style.borderColor="transparent");
            document.getElementById(id).style.borderColor="var(--g)";
        }

        function launch() {
            const name = document.getElementById('in-name').value.trim();
            if(!name) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠!");
            d.n = name; d.reg = true;
            document.getElementById('scr-reg').classList.add('hidden');
            const gate = document.getElementById('gate'); gate.style.display='block';
            setTimeout(() => {
                gate.classList.add('gate-open');
                setTimeout(() => { gate.style.display='none'; init(); nav('hub'); }, 1800);
            }, 100);
            save();
        }

        function init() {
            document.getElementById('ui-top').classList.remove('hidden');
            document.getElementById('u-name').innerText = d.n;
            document.getElementById('pet').childNodes[0].textContent = d.a;
            document.getElementById('partner').innerText = d.a;
            updateUI();
        }

        function nav(s) {
            document.querySelectorAll('.c').forEach(el => el.classList.add('hidden'));
            document.getElementById('scr-' + s).classList.remove('hidden');
            if(s === 'pet') startMove(); else stopMove();
        }

        // --- TAMAGOTCHI AI ---
        function startMove() {
            if(walkLoop) clearInterval(walkLoop);
            walkLoop = setInterval(() => {
                document.getElementById('pet').style.left = (Math.random()*70 + 15) + "%";
                d.h = Math.max(0, d.h - 1); updateUI(); save();
            }, 3000);
        }
        function stopMove() { clearInterval(walkLoop); }

        function pAct(type) {
            if(type==='feed') { d.h=Math.min(100, d.h+25); d.c+=5; msg("‡∏≠‡∏£‡πà‡∏≠‡∏¢‡∏à‡∏±‡∏á!"); }
            if(type==='walk') { d.s=Math.min(100, d.s+20); d.h-=10; d.c+=10; msg("‡∏™‡∏ô‡∏∏‡∏Å‡∏à‡∏±‡∏á!"); }
            if(type==='date') {
                const p = document.getElementById('partner'); p.style.right="50px"; p.style.opacity="1";
                msg("‡πÄ‡∏à‡∏≠‡∏Ñ‡∏π‡πà‡∏£‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ß! ‚ù§Ô∏è");
                setTimeout(() => { p.style.right="-120px"; p.style.opacity="0"; d.l++; d.c+=100; updateUI(); save(); }, 3000);
            }
            updateUI(); save();
        }
        function msg(t) { const b=document.getElementById('p-say'); b.innerText=t; b.classList.remove('hidden'); setTimeout(()=>b.classList.add('hidden'), 2000); }

        // --- WORD GAME ---
        function setL(l) { d.lang=l; d.w=(l==='TH'?'‡∏™‡πâ‡∏°':'SKY'); updateUI(); save(); }
        function wCheck() {
            const v = document.getElementById('w-in').value.trim();
            const last = d.w.slice(-1).toUpperCase();
            if(v.length > 1 && v[0].toUpperCase() === last) {
                d.w = v; d.c += 25;
                const log = document.getElementById('w-log');
                if(log.innerText.includes("‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥")) log.innerHTML = "";
                log.innerHTML = `<div style="color:var(--green)">‚úî ${v}</div>` + log.innerHTML;
                document.getElementById('w-in').value = "";
                updateUI(); save();
            } else { alert("‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß " + last); }
        }

        function updateUI() {
            document.getElementById('u-coins').innerText = d.c.toLocaleString();
            document.getElementById('u-love').innerText = d.l;
            document.getElementById('b-h').style.width = d.h + "%";
            document.getElementById('b-s').style.width = d.s + "%";
            document.getElementById('t-h').innerText = d.h + "%";
            document.getElementById('t-s').innerText = d.s + "%";
            document.getElementById('cur-w').innerText = d.w.toUpperCase();
            document.getElementById('next-l').innerText = d.w.slice(-1).toUpperCase();
        }

        function wipe() { if(confirm("‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) { localStorage.clear(); location.reload(); } }
    </script>
</body>
</html>
