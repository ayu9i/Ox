<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AYU GAME ZONE: OMNI EDITION</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --bg: #020617; --cyan: #22d3ee; --pink: #f43f5e; --gold: #fbbf24;
            --green: #10b981; --red: #ef4444; --admin: #a855f7; --glass: rgba(15, 23, 42, 0.9);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Kanit', sans-serif; }
        body { background: var(--bg); color: white; margin: 0; padding: 10px; display: flex; justify-content: center; min-height: 100vh; background: radial-gradient(circle at 50% 50%, #1e1b4b 0%, #020617 100%); overflow-x: hidden; }
        
        .container { width: 100%; max-width: 480px; background: var(--glass); backdrop-filter: blur(20px); border-radius: 30px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 0 50px rgba(0,0,0,0.8); }

        /* Admin & Language UI */
        .badge-admin { background: var(--admin); color: white; padding: 2px 8px; border-radius: 5px; font-weight: 900; font-family: 'Orbitron'; font-size: 0.7rem; box-shadow: 0 0 10px var(--admin); margin-right: 5px; }
        .lang-switch { display: flex; gap: 5px; margin-bottom: 10px; justify-content: flex-end; }
        .lang-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 4px 8px; border-radius: 8px; cursor: pointer; font-size: 0.7rem; }
        .lang-btn.active { background: var(--cyan); color: black; border-color: var(--cyan); }

        #admin-menu { display: none; background: rgba(168, 85, 247, 0.15); border: 1px solid var(--admin); border-radius: 20px; padding: 15px; margin-bottom: 15px; animation: glow 2s infinite; }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 5px var(--admin); } 50% { box-shadow: 0 0 20px var(--admin); } }

        /* Stats */
        .stats-panel { background: rgba(0,0,0,0.3); padding: 12px; border-radius: 20px; margin-bottom: 10px; }
        .exp-track { width: 100%; height: 8px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; margin-top: 5px; }
        .exp-fill { height: 100%; background: linear-gradient(90deg, var(--cyan), var(--admin)); width: 0%; transition: 0.8s; }
        .coin-display { font-size: 2.2rem; color: var(--gold); font-family: 'Orbitron'; text-align: center; margin: 10px 0; font-weight: 900; }

        /* Game Elements */
        .board { display: grid; gap: 10px; background: rgba(0,0,0,0.4); padding: 15px; border-radius: 25px; margin: 15px 0; border: 1px solid rgba(255,255,255,0.05); }
        .cell { aspect-ratio: 1/1; background: rgba(30, 41, 59, 0.8); border-radius: 15px; font-size: 2.5rem; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
        .cell:hover { background: rgba(255,255,255,0.05); }

        .chat-box { background: rgba(0,0,0,0.5); border-radius: 15px; height: 100px; overflow-y: auto; padding: 10px; font-size: 0.8rem; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.1); }
        .btn { font-family: 'Orbitron'; background: linear-gradient(90deg, #0ea5e9, #6366f1); color: white; border: none; padding: 15px; border-radius: 15px; width: 100%; font-weight: bold; cursor: pointer; }
        .btn-admin { background: var(--admin); padding: 8px; font-size: 0.65rem; margin: 2px; }

        #ban-overlay { display: none; position: fixed; inset: 0; background: black; color: var(--red); z-index: 99999; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
    </style>
</head>
<body>

<div id="ban-overlay">
    <h1 style="font-size: 4rem; font-family: 'Orbitron';">BANNED</h1>
    <p id="ban-text">You have been prohibited from this server.</p>
</div>

<div class="container" id="app">
    <div class="lang-switch">
        <button class="lang-btn" id="btn-th" onclick="setLang('th')">TH</button>
        <button class="lang-btn" id="btn-en" onclick="setLang('en')">EN</button>
    </div>

    <div class="top-bar" style="display:flex; justify-content: space-between; font-size: 0.7rem; font-family:'Orbitron'; margin-bottom: 10px;">
        <span>PING: <span id="ping">18</span>ms</span>
        <span><span id="admin-sym"></span> <span id="user-name">Guest</span></span>
    </div>

    <div id="admin-menu">
        <p style="color:var(--admin); font-weight:bold; margin-top:0;">ADMIN CONTROL PANEL</p>
        <div style="display:grid; grid-template-columns: 1fr 1fr;">
            <button class="btn btn-admin" onclick="admAction('coins')">ADD 1M COINS</button>
            <button class="btn btn-admin" onclick="admAction('level')">MAX LEVEL (99)</button>
            <button class="btn btn-admin" onclick="admAction('rank')">MAX RANK (999)</button>
            <button class="btn btn-admin" style="background:var(--red)" onclick="admAction('ban')">SELF BAN</button>
        </div>
    </div>

    <div class="stats-panel">
        <div style="display:flex; justify-content: space-between; font-family:'Orbitron'; font-size:0.8rem;">
            <span id="txt-lvl">LVL 1</span>
            <span id="txt-exp">0/500</span>
        </div>
        <div class="exp-track"><div id="exp-bar" class="exp-fill"></div></div>
    </div>

    <div class="coin-display">ðŸª™ <span id="coin-val">0</span></div>

    <div style="background:rgba(251,191,36,0.1); padding:10px; border-radius:15px; border:1px dashed var(--gold); margin-bottom:15px;">
        <div style="display:flex; gap:5px;">
            <input type="text" id="code-in" placeholder="Redeem Code..." style="background:rgba(0,0,0,0.5); border:1px solid #333; color:white; padding:8px; border-radius:10px; flex:1;">
            <button class="btn" style="width:70px; padding:0;" onclick="useCode()">OK</button>
        </div>
    </div>

    <div class="chat-box" id="chat"></div>
    <div style="display:flex; gap:5px; margin-bottom:10px;">
        <input type="text" id="chat-in" placeholder="..." style="background:rgba(0,0,0,0.5); border:1px solid #333; color:white; padding:10px; border-radius:10px; flex:1;">
        <button class="btn" style="width:50px; padding:0;" onclick="chat()">âž¤</button>
    </div>

    <select id="bot-diff" style="background:#1e293b; color:white; width:100%; padding:10px; border-radius:10px; margin-bottom:10px;">
        <option value="easy">Difficulty: Easy</option>
        <option value="god" selected>Difficulty: GOD (Impossible)</option>
    </select>

    <div id="grid" class="board"></div>
    <button class="btn" style="background:var(--red)" onclick="startNew()">FIND MATCH</button>
</div>

<script>
    /* --- Systems & Translation --- */
    const TRANSLATE = {
        th: { welcome: "à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸š!", match: "à¸à¸³à¸¥à¸±à¸‡à¸«à¸²à¸«à¹‰à¸­à¸‡...", found: "à¹€à¸ˆà¸­à¸„à¸¹à¹ˆà¹à¸‚à¹ˆà¸‡à¹à¸¥à¹‰à¸§!", win: "à¸„à¸¸à¸“à¸Šà¸™à¸°!", lose: "à¸„à¸¸à¸“à¹à¸žà¹‰à¸šà¸­à¸—à¹€à¸—à¸ž!", draw: "à¹€à¸ªà¸¡à¸­!", ban: "à¸„à¸¸à¸“à¸–à¸¹à¸à¹à¸šà¸™à¸–à¸²à¸§à¸£", level: "à¹€à¸¥à¹€à¸§à¸¥", exp: "à¸›à¸£à¸°à¸ªà¸šà¸à¸²à¸£à¸“à¹Œ", difficulty: "à¸£à¸°à¸”à¸±à¸šà¸„à¸§à¸²à¸¡à¸¢à¸²à¸" },
        en: { welcome: "Welcome!", match: "Finding Match...", found: "Match Found!", win: "Victory!", lose: "Defeated by God AI!", draw: "Draw!", ban: "You have been banned", level: "Level", exp: "EXP", difficulty: "Difficulty" }
    };

    let L = 'th';
    let player = JSON.parse(localStorage.getItem('ayu_pro_data')) || {
        name: 'Guest', coins: 0, exp: 0, lvl: 1, wins: 0, isAdmin: false, isBanned: false, codes: []
    };

    /* --- Core Logic --- */
    function setLang(lang) {
        L = lang;
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('btn-' + lang).classList.add('active');
        document.getElementById('txt-lvl').innerText = TRANSLATE[L].level + " " + player.lvl;
        updateUI();
    }

    function updateUI() {
        document.getElementById('coin-val').innerText = player.coins.toLocaleString();
        document.getElementById('txt-exp').innerText = player.exp + "/500";
        document.getElementById('exp-bar').style.width = (player.exp / 5) + "%";
        document.getElementById('admin-sym').innerHTML = player.isAdmin ? '<span class="badge-admin">A</span>' : '';
        document.getElementById('admin-menu').style.display = player.isAdmin ? 'block' : 'none';
        if(player.isBanned) { document.getElementById('ban-overlay').style.display = 'flex'; document.getElementById('ban-text').innerText = TRANSLATE[L].ban; }
        save();
    }

    /* --- GOD AI (Minimax) --- */
    let board = Array(9).fill('');
    let active = false;

    function minimax(b, depth, isMax) {
        if(checkWinSim(b, 'O')) return 10 - depth;
        if(checkWinSim(b, 'X')) return depth - 10;
        if(b.every(x => x !== '')) return 0;

        if(isMax) {
            let best = -Infinity;
            for(let i=0; i<9; i++) {
                if(b[i]==='') { b[i]='O'; best = Math.max(best, minimax(b, depth+1, false)); b[i]=''; }
            } return best;
        } else {
            let best = Infinity;
            for(let i=0; i<9; i++) {
                if(b[i]==='') { b[i]='X'; best = Math.min(best, minimax(b, depth+1, true)); b[i]=''; }
            } return best;
        }
    }

    function botTurn() {
        let bestScore = -Infinity, move;
        let diff = document.getElementById('bot-diff').value;

        if(diff === 'god') {
            for(let i=0; i<9; i++) {
                if(board[i]==='') { board[i]='O'; let score = minimax(board, 0, false); board[i]=''; if(score > bestScore) { bestScore = score; move = i; } }
            }
        } else {
            let empty = board.map((v,i)=>v===''?i:null).filter(v=>v!==null);
            move = empty[Math.floor(Math.random()*empty.length)];
        }

        board[move] = 'O'; render();
        if(checkWin('O')) return end('lose');
        if(board.every(x=>x!=='')) return end('draw');
        active = true;
    }

    /* --- Actions --- */
    function useCode() {
        let c = document.getElementById('code-in').value.trim();
        if(c === 'ADMIN_AYU_2026') { player.isAdmin = true; confetti(); alert("Admin Unlocked!"); }
        else if(c === 'FREE') { player.coins += 5000; }
        else { alert("Invalid Code"); }
        document.getElementById('code-in').value = ''; updateUI();
    }

    function admAction(type) {
        if(type === 'coins') player.coins += 1000000;
        if(type === 'level') player.lvl = 99;
        if(type === 'rank') player.wins = 999;
        if(type === 'ban') player.isBanned = true;
        updateUI();
    }

    function tap(i) {
        if(!active || board[i] !== '') return;
        board[i] = 'X'; render();
        if(checkWin('X')) return end('win');
        if(board.every(x=>x!=='')) return end('draw');
        active = false; setTimeout(botTurn, 600);
    }

    function checkWinSim(b, p) {
        const w = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        return w.some(comb => comb.every(idx => b[idx] === p));
    }

    function checkWin(p) { return checkWinSim(board, p); }

    function end(res) {
        active = false;
        if(res === 'win') { confetti(); player.coins += 200; player.exp += 100; player.wins++; alert(TRANSLATE[L].win); }
        else if(res === 'lose') alert(TRANSLATE[L].lose);
        else alert(TRANSLATE[L].draw);
        if(player.exp >= 500) { player.lvl++; player.exp=0; }
        updateUI();
    }

    function render() {
        const g = document.getElementById('grid'); g.innerHTML = '';
        board.forEach((v, i) => {
            let div = document.createElement('div');
            div.className = 'cell';
            div.style.color = v === 'X' ? 'var(--cyan)' : 'var(--pink)';
            div.innerText = v === 'X' ? (player.isAdmin ? 'A' : 'âŒ') : (v === 'O' ? 'â­•' : '');
            div.onclick = () => tap(i);
            g.appendChild(div);
        });
    }

    function startNew() {
        document.getElementById('chat').innerHTML += `<div style="color:var(--gold)">${TRANSLATE[L].match}</div>`;
        setTimeout(() => { 
            board = Array(9).fill(''); render(); active = true;
            document.getElementById('chat').innerHTML += `<div style="color:var(--green)">${TRANSLATE[L].found}</div>`;
        }, 1000);
    }

    function chat() {
        let i = document.getElementById('chat-in');
        if(i.value) { 
            let name = player.isAdmin ? '[A] ' + player.name : player.name;
            document.getElementById('chat').innerHTML += `<div><b>${name}:</b> ${i.value}</div>`;
            i.value = ''; document.getElementById('chat').scrollTop = 999;
        }
    }

    function save() { localStorage.setItem('ayu_pro_data', JSON.stringify(player)); }
    
    // Initial
    setLang('th');
    setInterval(() => document.getElementById('ping').innerText = Math.floor(Math.random()*10)+12, 2500);
</script>
</body>
</html>
