<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AYU ARENA - THE MULTIVERSE</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6366f1; --g: #fbbf24; --bg: #020617; --glass: rgba(15, 23, 42, 0.95); --green: #10b981; --red: #ef4444; }
        * { box-sizing: border-box; transition: 0.2s; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; min-height: 100vh; font-family: 'Kanit', sans-serif; background: var(--bg); color: white; overflow: hidden; display: flex; align-items: center; justify-content: center; }

        .game-card { width: 95%; max-width: 480px; background: var(--glass); border-radius: 40px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); position: relative; box-shadow: 0 0 50px #000; }
        .hidden { display: none !important; }

        /* --- STATS --- */
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-bottom: 15px; }
        .stat-i { background: #1e293b; padding: 5px; border-radius: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
        .stat-i b { display: block; font-size: 0.8rem; color: var(--g); font-family: 'Orbitron'; }
        .stat-i span { font-size: 0.6rem; color: #94a3b8; }

        /* --- SCREEN --- */
        .screen { width: 100%; height: 230px; border-radius: 30px; border: 3px solid #334155; position: relative; overflow: hidden; background-size: cover; margin-bottom: 15px; }
        #pet { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 60px; z-index: 10; }
        #pet-hat { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); font-size: 25px; pointer-events: none; }
        #enemy { position: absolute; bottom: 20px; right: -50px; font-size: 40px; } /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏°‡∏ß‡∏¥‡πà‡∏á */
        .weather-layer { position: absolute; inset: 0; pointer-events: none; background: transparent; z-index: 5; }

        /* --- BARS --- */
        .bar-container { display: flex; gap: 10px; margin-bottom: 15px; }
        .bar-wrap { flex: 1; }
        .bar-bg { height: 8px; background: #0f172a; border-radius: 10px; overflow: hidden; margin-top: 4px; }
        .bar-fill { height: 100%; transition: 0.5s; }

        /* --- CONTROLS --- */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        .btn { border: none; border-radius: 18px; padding: 12px 5px; color: white; font-family: 'Kanit'; font-weight: 700; cursor: pointer; background: #1e293b; border-bottom: 4px solid #000; display: flex; flex-direction: column; align-items: center; font-size: 0.8rem; }
        .btn:active { transform: translateY(2px); border-bottom-width: 2px; }
        .btn-p { background: var(--p); }
        .btn-g { background: var(--g); color: #000; }

        /* --- MODAL --- */
        .modal { position: absolute; inset: 15px; background: #0f172a; border-radius: 30px; z-index: 100; padding: 20px; border: 1px solid var(--p); display: none; flex-direction: column; }
        
        /* --- ANIMATIONS --- */
        .jump { animation: jumpAnim 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes jumpAnim { 0%, 100% { bottom: 20px; } 50% { bottom: 120px; } }
        .rain { background: rgba(0, 100, 255, 0.1); box-shadow: inset 0 0 30px rgba(0,100,255,0.2); }
    </style>
</head>
<body>

    <div class="game-card">
        <div class="stats">
            <div class="stat-i"><span>MONEY</span><b id="u-c">0</b></div>
            <div class="stat-i"><span>FOOD</span><b id="u-f">0</b></div>
            <div class="stat-i"><span>AGE</span><b id="u-age">0.0</b></div>
            <div class="stat-i"><span>LOVE</span><b id="u-love">0</b></div>
        </div>

        <div class="screen" id="sc" style="background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=500');">
            <div id="weather" class="weather-layer"></div>
            <div id="pet">
                <div id="pet-hat"></div>
                <span id="pet-emoji">üê∂</span>
            </div>
            <div id="enemy">üåµ</div>
            <div id="score-box" class="hidden" style="position:absolute; top:10px; left:50%; transform:translateX(-50%); font-family:Orbitron; font-size:1.5rem; color:var(--g); z-index:20;">0</div>
        </div>

        <div class="bar-container">
            <div class="bar-wrap">
                <span style="font-size:0.6rem">HUNGER (‡∏´‡∏¥‡∏ß)</span>
                <div class="bar-bg"><div id="b-h" class="bar-fill" style="background:var(--red)"></div></div>
            </div>
            <div class="bar-wrap">
                <span style="font-size:0.6rem">ENERGY (‡∏û‡∏•‡∏±‡∏á)</span>
                <div class="bar-bg"><div id="b-e" class="bar-fill" style="background:var(--p)"></div></div>
            </div>
        </div>

        <div class="grid">
            <button class="btn btn-p" onclick="feed()"><span>üçñ</span>‡∏õ‡πâ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß</button>
            <button class="btn btn-p" onclick="openMod('game')"><span>üéÆ</span>‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°</button>
            <button class="btn btn-p" onclick="openMod('shop')"><span>üõí</span>‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</button>
            
            <button class="btn btn-g" onclick="openMod('gacha')"><span>üé≤</span>‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏ä‡∏Ñ</button>
            <button class="btn btn-g" onclick="openMod('hat')"><span>üëí</span>‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏±‡∏ß</button>
            <button class="btn btn-g" onclick="openMod('code')"><span>üîë</span>‡πÇ‡∏Ñ‡πâ‡∏î‡∏•‡∏±‡∏ö</button>
            
            <button id="btn-marry" class="btn hidden" style="grid-column: span 3; background:var(--green)" onclick="marry()">üíí ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏°‡∏µ‡∏ó‡∏≤‡∏¢‡∏≤‡∏ó (Age 10)</button>
        </div>

        <div id="mod-shop" class="modal">
            <h2 style="color:var(--g)">SHOP</h2>
            <button class="btn btn-g" style="width:100%; margin-bottom:10px" onclick="buy(1, 50)">‡∏ô‡πà‡∏≠‡∏á‡πÑ‡∏Å‡πà x1 (50üí∞)</button>
            <button class="btn btn-g" style="width:100%" onclick="buy(10, 450)">‡∏ô‡πà‡∏≠‡∏á‡πÑ‡∏Å‡πà x10 (450üí∞)</button>
            <button class="btn" style="margin-top:auto" onclick="closeMod()">‡∏õ‡∏¥‡∏î</button>
        </div>

        <div id="mod-game" class="modal">
            <h2 style="color:var(--p)">ARCADE</h2>
            <button class="btn btn-p" style="width:100%; margin-bottom:10px" onclick="gameStar()">‚≠ê ‡πÄ‡∏Å‡πá‡∏ö‡∏î‡∏≤‡∏ß (‡∏´‡∏≤‡πÄ‡∏á‡∏¥‡∏ô)</button>
            <button class="btn btn-p" style="width:100%" onclick="gameRun()">üèÉ ‡∏ß‡∏¥‡πà‡∏á‡∏™‡∏π‡πâ‡∏ü‡∏±‡∏î (‡∏´‡∏≤‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏±‡∏Å)</button>
            <button class="btn" style="margin-top:auto" onclick="closeMod()">‡∏õ‡∏¥‡∏î</button>
        </div>

        <div id="mod-gacha" class="modal">
            <h2 style="color:var(--g)">GACHA</h2>
            <p>‡∏™‡∏∏‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (100üí∞ ‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á)</p>
            <button class="btn btn-g" style="width:100%" onclick="rollGacha()">‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏ä‡∏Ñ!</button>
            <div id="gacha-res" style="margin-top:20px; text-align:center; font-size:1.5rem"></div>
            <button class="btn" style="margin-top:auto" onclick="closeMod()">‡∏õ‡∏¥‡∏î</button>
        </div>

        <div id="mod-hat" class="modal">
            <h2 style="color:var(--g)">DRESS UP</h2>
            <div class="grid">
                <button class="btn" onclick="setHat('üëë')">üëë</button>
                <button class="btn" onclick="setHat('üé©')">üé©</button>
                <button class="btn" onclick="setHat('üëí')">üëí</button>
                <button class="btn" onclick="setHat('üéÄ')">üéÄ</button>
                <button class="btn" onclick="setHat('')">‡∏ñ‡∏≠‡∏î</button>
            </div>
            <button class="btn" style="margin-top:auto" onclick="closeMod()">‡∏õ‡∏¥‡∏î</button>
        </div>

        <div id="mod-code" class="modal">
            <h2 style="color:var(--green)">CODE</h2>
            <input type="text" id="code-in" placeholder="‡πÉ‡∏™‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏•‡∏±‡∏ö...">
            <button class="btn btn-p" style="width:100%" onclick="redeem()">REDEEM</button>
            <button class="btn" style="margin-top:auto" onclick="closeMod()">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <script>
        let s = { c:200, f:5, h:100, e:100, age:0, love:0, hat:'', gen:1, used:[], reg:false, p:'üê∂' };
        let activeG = false;

        // 20 CODES
        const CODES = { "AYU2026":{c:1000}, "GODMODE":{c:9999,f:99}, "RICH":{c:5000}, "LOVE":{love:50}, "STARTER":{c:200,f:5} /* ... ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ä‡∏≠‡∏ö */ };

        window.onload = () => {
            const save = localStorage.getItem('AYU_MULTIVERSE');
            if(save) { s = JSON.parse(save); updateUI(); }
            setInterval(() => {
                if(!activeG) {
                    s.h = Math.max(0, s.h - 1);
                    s.e = Math.max(0, s.e - 0.5);
                    s.age += 0.05;
                    if(s.age >= 10) document.getElementById('btn-marry').classList.remove('hidden');
                    updateUI(); saveG();
                }
            }, 10000);
        };

        function saveG() { localStorage.setItem('AYU_MULTIVERSE', JSON.stringify(s)); }
        function updateUI() {
            document.getElementById('u-c').innerText = Math.floor(s.c);
            document.getElementById('u-f').innerText = s.f;
            document.getElementById('u-age').innerText = s.age.toFixed(1);
            document.getElementById('u-love').innerText = s.love;
            document.getElementById('b-h').style.width = s.h + "%";
            document.getElementById('b-e').style.width = s.e + "%";
            document.getElementById('pet-emoji').innerText = s.p;
            document.getElementById('pet-hat').innerText = s.hat;
        }

        function openMod(id) { document.getElementById('mod-'+id).style.display='flex'; }
        function closeMod() { document.querySelectorAll('.modal').forEach(m=>m.style.display='none'); }

        function feed() {
            if(s.f>0 && s.h<100) { s.f--; s.h=Math.min(100, s.h+20); updateUI(); saveG(); }
        }

        function buy(a,p) { if(s.c>=p){ s.c-=p; s.f+=a; updateUI(); saveG(); } }

        function setHat(h) { s.hat = h; updateUI(); saveG(); }

        function rollGacha() {
            if(s.c < 100) return alert("‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠!");
            s.c -= 100;
            const res = ["üçñ x5", "üí∞ 500", "üíñ Love +10", "üí© ‡∏Ç‡∏¢‡∏∞"];
            const r = Math.floor(Math.random()*res.length);
            document.getElementById('gacha-res').innerText = "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö: " + res[r];
            if(r==0) s.f+=5; if(r==1) s.c+=500; if(r==2) s.love+=10;
            updateUI(); saveG();
        }

        // --- GAME 1: STARS ---
        function gameStar() {
            closeMod(); activeG = true; let sc = 0;
            const box = document.getElementById('score-box');
            box.classList.remove('hidden');
            
            let si = setInterval(() => {
                const st = document.createElement('div');
                st.style.position='absolute'; st.style.top='0'; st.style.left=Math.random()*90+'%';
                st.innerText='‚≠ê'; st.style.fontSize='25px'; document.getElementById('sc').appendChild(st);
                let fall = setInterval(() => {
                    st.style.top = (parseInt(st.style.top)||0)+5+'px';
                    let pR = document.getElementById('pet').getBoundingClientRect();
                    let sR = st.getBoundingClientRect();
                    if(sR.bottom >= pR.top && sR.left < pR.right && sR.right > pR.left) {
                        sc++; box.innerText = sc; st.remove(); clearInterval(fall);
                    }
                    if(parseInt(st.style.top)>230){ st.remove(); clearInterval(fall); }
                }, 30);
            }, 800);

            setTimeout(() => { clearInterval(si); activeG=false; box.classList.add('hidden'); s.c+=sc*20; alert("‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô "+sc*20); updateUI(); saveG(); }, 10000);
        }

        // --- GAME 2: JUMP RUN ---
        function gameRun() {
            closeMod(); activeG = true; let sc = 0;
            const pet = document.getElementById('pet');
            const enemy = document.getElementById('enemy');
            const scBox = document.getElementById('score-box');
            scBox.classList.remove('hidden'); scBox.innerText = "0";

            // Jump Control
            window.onclick = () => pet.classList.add('jump');
            pet.onanimationend = () => pet.classList.remove('jump');

            let runInt = setInterval(() => {
                let eLeft = parseInt(window.getComputedStyle(enemy).getPropertyValue("right"));
                if(eLeft > 500) { eLeft = -50; sc++; scBox.innerText = sc; }
                enemy.style.right = (eLeft + 8) + "px";

                let pBottom = parseInt(window.getComputedStyle(pet).getPropertyValue("bottom"));
                let eRight = parseInt(window.getComputedStyle(enemy).getPropertyValue("right"));

                // Collision Check (Simplified)
                if(eRight > 200 && eRight < 250 && pBottom < 60) {
                    clearInterval(runInt); activeG = false;
                    scBox.classList.add('hidden');
                    enemy.style.right = "-50px";
                    s.love += sc; alert("‡πÄ‡∏Å‡∏°‡∏à‡∏ö! ‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏±‡∏Å: " + sc);
                    updateUI(); saveG();
                }
            }, 20);
        }

        function redeem() {
            let i = document.getElementById('code-in').value.toUpperCase();
            if(CODES[i]) { s.c+=(CODES[i].c||0); s.f+=(CODES[i].f||0); s.love+=(CODES[i].love||0); alert("‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"); closeMod(); updateUI(); saveG(); }
        }

        function marry() {
            if(confirm("‡πÄ‡∏£‡∏¥‡πà‡∏° Gen ‡πÉ‡∏´‡∏°‡πà? ‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏±‡∏Å‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡πÄ‡∏Å‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô!")) {
                s.gen++; s.age=0; s.h=100; s.e=100; s.c+=s.love*10; // ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å
                s.love=0; updateUI(); saveG();
            }
        }
    </script>
</body>
</html>
